---
title:  "웹 서버(Web Server) vs WAS(Web Application Server)"
excerpt: "웹 서버(Web Server) vs WAS(Web Application Server)를 알아보자!"

categories:
  - Web
  
last_modified_at: 2021-01-18T18:35:00
---

요즘 스프링 부트를 이용해서 간단한 웹 애플리케이션을 실습해보고 있다. 스프링 부트에선 클라이언트에게 보여지는 view를 정적(static) 페이지와 동적(templates) 페이지로 분리해서 관리한다. 정적 페이지와 동적 페이지, 이들을 서비스하는 서버인 웹 서버와 웹 애플리케이션 서버에 대해 간단하게 알고 있었지만 이번 기회에 한번 제대로 알아보려고 한다.  

아래의 글을 참고하여 공부 및 정리해보려고 한다.  

[![웹서버was1](https://user-images.githubusercontent.com/53072057/104865877-85c68d00-5980-11eb-8648-f069e99c8d10.JPG)](https://gmlwjd9405.github.io/2018/10/27/webserver-vs-was.html)  

우선 정적 페이지와 동적 페이지에 대해서 알아보자.  

정적 페이지는 우리가 웹사이트에서 어떠한 동작을 하더라도 아무런 변화가 없이 **항상 동일한 페이지**이다. 우리가 url을 통해 웹사이트를 접속하게 되면 웹 애플리케이션은 웹 서버를 통해 url에 해당하는 파일(image, html, css 등)을 찾아서 우리에게 보여준다.  

반면 동적 페이지는 우리가 웹사이트에서 어떠한 동작을 했을 때 그 **동작의 결과에 맞도록 변하는 페이지**이다. 우리가 Naver에 접속한 다음 로그인을 하게 되면 우리의 아이디로 로그인된 화면을 보여주는 것이 바로 동적 페이지이다. 즉, **웹 서버에 의해서 실행되는 웹 애플리케이션을 통해서 만들어진 결과물**을 뜻한다.  

그렇다면 본격적으로 웹 서버와 WAS에 대해서 알아보자.  

웹 서버는 **클라이언트가 서버에게 페이지 요청을 하면 이에 해당하는 정적인 컨텐츠를 HTTP 프로토콜을 통해 제공하는 서버**이다. 웹 서버의 예로는 Apache, Nginx, IIS 등이 존재한다.  

웹 서버는 두 가지 기능을 수행한다. 첫 번째는 정적 컨텐츠를 제공하는 기능이다. 클라이언트가 요청한 페이지가 정적 컨텐츠라면 해당하는 정적 컨텐츠를 찾아서 제공하는 기능이다.  

두 번째는 동적 컨텐츠를 제공하는 기능이다. 클라이언트가 요청한 페이지가 동적 컨텐츠라면 이 요청을 WAS에게 보낸다. 이후 WAS에서 처리한 결과를 전달받아 클라이언트에게 제공하는 기능이다.  

![웹서버was2](https://user-images.githubusercontent.com/53072057/104865879-865f2380-5980-11eb-8ac6-f5cc16bc235a.JPG)  

WAS는 **DB 조회나 다양한 로직 처리를 요구하는 동적인 컨텐츠를 제공하기 위해 만들어진 애플리케이션 서버**이다. HTTP 프로토콜을 통해 컴퓨터나 장치에 애플리케이션을 수행해주는 미들웨어이며, **웹 컨테이너(Web Container) or 서블릿 컨테이너(Servlet Container)**라고 불린다. WAS의 예로는 Tomcat, JBoss, Jesu 등이 존재한다.  

WAS는 **웹 서버와 웹 컨테이너 역할을 수행**한다. 웹 서버 기능들을 구조적으로 분리하여 처리하고자 하는 목적으로 제시되었다.  

WAS의 주요 기능은 다음과 같다.  

* 프로그램 실행 환경과 DB 접속 기능 제공  
* 여러 개의 트랜잭션(논리적인 작업 단위) 관리 기능  
* 업무를 처리하는 비즈니스 로직 수행  

웹 애플리케이션을 개발할 때 자주 사용하는 웹 서비스 아키텍처는 다음과 같이 Client - 웹 서버 -  WAS - Database 형태이다.  

![웹서버was3](https://user-images.githubusercontent.com/53072057/104865880-86f7ba00-5980-11eb-8766-e1d7fac0247c.JPG)  

이 구조의 동작 과정은 다음과 같다.  

1. 웹 서버는 웹 브라우저 클라이언트로부터 HTTP 요청을 받는다.

2. 웹 서버는 클라이언트의 요청을 WAS에게 보낸다.

3. WAS는 관련된 Servlet을 메모리에 올린다.

4. WAS는 web.xml을 참조하여 해당 Servlet에 대한 Thread를 생성한다. (Thread Pool 이용)

5. HttpServletRequest와 HttpServletResponse 객체를 생성하여 Servlet에게 전달한다.

     5-1. Thread는 Servlet의 service() 메서드를 호출한다.

     5-2. service() 메서드는 요청에 맞게 doGet() or doPost() 메서드를 호출한다.

6. 호출된 메서드는 인자에 맞게 생성된 적절한 동적 페이지를 Response 객체에 담아 WAS에게 전달한다.

7. WAS는 Response 객체를 HttpResponse 형태로 바꾸어 웹 서버에게 전달한다.

8. 생성된 Thread를 종료하고, HttpServletRequest와 HttpServletResponse 객체를 제거한다.  

마지막으로 웹 서버와 WAS가 필요한 이유를 살펴보자.  

웹 서버는 정적 컨텐츠를 제공해주는 서버라고 하였다. 클라이언트가 정적 컨텐츠를 요청했을 때 웹 서버가 존재하지 않는다면 WAS에게 요청이 전달된 후 처리된 결과를 얻을 것이다. WAS가 동적 컨텐츠뿐만 아니라 정적 컨텐츠까지 관리하게 된다면 서버에 부하가 많이 걸려 좋지 않다. 따라서 웹 서버를 통해 정적 컨텐츠를 따로 처리하도록 하여 서버의 부담을 줄여주는 것이다.  

다음으로 WAS가 필요한 이유이다. 우리가 흔히 사용하는 웹 페이지를 정적 페이지로만 구성하는 것은 불가능에 가깝다. 정적 페이지만을 사용한다면 클라이언트의 모든 요청에 대한 결괏값을 미리 정적 컨텐츠로 구현해놔야 하는데 이는 굉장히 비효율적이고 사실상 불가능에 가깝다. 따라서 WAS를 통해 동적 컨텐츠를 제공할 수 있도록 하는 것이다.  

그런데 자세히 보면 WAS가 웹 서버의 역할도 수행한다고 하였다. 그렇다면 WAS만 사용하고 웹 서버는 사용할 필요가 없지 않을까라는 의문이 들 수 있을 것이다. 웹 서버와 WAS를 구분해서 사용하는 이유는 다음과 같다.  

1. 기능을 분리하여 서버 부하 방지

     - 정적 컨텐츠와 동적 컨텐츠를 따로 제공하여 서버의 부담을 줄임

2. 물리적으로 분리하여 보안 강화

     - SSL에 대한 암복호화 처리에 웹 서버를 사용해서 보안을 강화

3. 여러 대의 WAS를 연결 가능

     - 로드 밸런싱(Load Balancing)을 위해 웹 서버를 사용

     - 장애 극복(Fail over), Fail back 처리에 유리

4. 여러 웹 애플리케이션 서비스 가능 

     - 하나의 서버에서 PHP 애플리케이션과 Java 애플리 케이션을 함께 사용 가능

5. 기타

     - 접근 허용 IP 관리, 2대 이상의 서버에서의 세션 관리 등을 웹 서버에서 처리하면 효율적  
	 

즉, **자원 이용의 효율성 및 장애 극복, 배포 및 유지 보수의 편의성**을 위해 웹 서버와 WAS를 분리하여 사용한다. 또한, 웹 서버를 WAS 앞에 두고 필요한 WAS들을 웹 서버에 플러그인 형태로 설정하면 더욱 효율적인 분산 처리가 가능하다.  
